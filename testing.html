<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MANGO: Testing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('testing.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Testing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md36"></a>
Unit tests</h1>
<p>Unit tests are implemented using the <a href="https://github.com/catchorg/Catch2">Catch2</a> framework. The tests are written in <code>mango/src/api/tests</code>. When MANGO is compiled, the unit tests are put in the executable <code>mango/tests/unit_tests</code>. There are many options for this executable, which can be found by running </p><pre class="fragment">~/mango/tests&gt; ./unit_tests --help
</pre><p>The <code>unit_tests</code> executable runs with however many MPI processes are given to it. So, <code>./unit_tests</code> runs with a single process, <code>mpiexec -n 2 ./unit_tests</code> runs with 2 processes, etc. The python script <code>mango/tests/run_mpi_unit_tests</code> automatically runs the <code>unit_tests</code> exectuable for 1, 2, 3, 4, and 5 MPI processes, to make sure the tests pass for all cases.</p>
<p>To add a new unit test, you can use the examples in <code>mango/src/api/tests/</code> as a model, and look at the <a href="https://github.com/catchorg/Catch2">Catch2 documentation</a>. MANGO considers the unit tests to be defined by the variable <code>TEST_SRC_FILES</code> of the main makefile. You can run </p><pre class="fragment">~/mango&gt; make test_make
</pre><p>to print out the makefile variables and examine <code>TEST_SRC_FILES</code> to make sure it includes your new test.</p>
<h1><a class="anchor" id="autotoc_md37"></a>
Integrated and regression tests</h1>
<p>Integrated/regression tests are incorporated using the examples in <code>mango/examples/</code>. Each example consists of source code in <code>mango/examples/src/</code>, an input file <code>mango/examples/input/mango_in.*</code>, a file <code>mango/examples/input/test_parameters.*</code>, and a reference output file <code>mango/examples/output/short_summary.*.reference</code>. The <code>mango_in.*</code> file contains 2 lines, listing the number of worker groups and the optimization algorithm, and these entries are re-written by the testing framework when the test is run to vary these two parameters. The <code>test_parameters.*</code> file has a list of the number of MPI processes to try, the number of worker groups to try, and the optimization algorithms to try.</p>
<h1><a class="anchor" id="autotoc_md38"></a>
Running the tests</h1>
<p>From the root MANGO directory, you can run </p><pre class="fragment">~/mango&gt; make test
</pre><p>to run both the unit tests and integrated/regression tests. If you want to run only the unit tests, you can instead run </p><pre class="fragment">~/mango&gt; make unit_tests
</pre><h1><a class="anchor" id="autotoc_md39"></a>
Continuous integration</h1>
<p>MANGO uses <a href="https://travis-ci.org/">Travis-CI</a> for continuous integration. Every time there is a commit to any branch of MANGO's GitHub repository, MANGO is compiled and linked on Travis's servers, and the unit tests and integrated/regression tests are run. If the build fails or any tests fail, the "build passing" badge on MANGO's GitHub page will be replaced with "build failed". You can also see the detailed build and test log at <a href="https://travis-ci.org/github/hiddensymmetries/mango">https://travis-ci.org/github/hiddensymmetries/mango</a> . Travis is configured using the file <code>.travis.yml</code> in MANGO's root directory, and the build and test steps are defined in the script <code>tests/travis.sh</code>. <br  />
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
